{
  "contractName": "DividendDistributor",
  "constructorInputs": [
    {
      "name": "dividendPerToken",
      "type": "int"
    }
  ],
  "abi": [
    {
      "name": "distribute",
      "inputs": []
    }
  ],
  "bytecode": "OP_TXINPUTCOUNT OP_DUP OP_0 OP_GREATERTHAN OP_IF OP_0 OP_UTXOTOKENAMOUNT OP_DUP OP_0 OP_GREATERTHAN OP_IF OP_0 OP_OUTPUTVALUE OP_OVER OP_4 OP_PICK OP_MUL OP_NUMEQUALVERIFY OP_ENDIF OP_DROP OP_ENDIF OP_DUP OP_1 OP_GREATERTHAN OP_IF OP_1 OP_UTXOTOKENAMOUNT OP_DUP OP_0 OP_GREATERTHAN OP_IF OP_1 OP_OUTPUTVALUE OP_OVER OP_4 OP_PICK OP_MUL OP_NUMEQUALVERIFY OP_ENDIF OP_DROP OP_ENDIF OP_DUP OP_2 OP_GREATERTHAN OP_IF OP_2 OP_UTXOTOKENAMOUNT OP_DUP OP_0 OP_GREATERTHAN OP_IF OP_2 OP_OUTPUTVALUE OP_OVER OP_4 OP_PICK OP_MUL OP_NUMEQUALVERIFY OP_ENDIF OP_DROP OP_ENDIF OP_DUP OP_3 OP_GREATERTHAN OP_IF OP_3 OP_UTXOTOKENAMOUNT OP_DUP OP_0 OP_GREATERTHAN OP_IF OP_3 OP_OUTPUTVALUE OP_OVER OP_4 OP_PICK OP_MUL OP_NUMEQUALVERIFY OP_ENDIF OP_DROP OP_ENDIF OP_DUP OP_4 OP_GREATERTHAN OP_IF OP_4 OP_UTXOTOKENAMOUNT OP_DUP OP_0 OP_GREATERTHAN OP_IF OP_4 OP_OUTPUTVALUE OP_OVER OP_4 OP_PICK OP_MUL OP_NUMEQUALVERIFY OP_ENDIF OP_DROP OP_ENDIF OP_5 OP_LESSTHANOREQUAL OP_NIP",
  "source": "pragma cashscript ^0.12.0;\r\n\r\n// DividendDistributor.cash\r\n// Distributes dividends to token holders based on their input token amount.\r\n// Note: 'while' loops are not yet supported in this CashScript version.\r\n// We implement an unrolled loop for up to 5 inputs as a Proof of Concept.\r\n\r\ncontract DividendDistributor(\r\n    int dividendPerToken\r\n) {\r\n    function distribute() {\r\n        int len = tx.inputs.length;\r\n        \r\n        // Unrolled loop for max 5 inputs\r\n        // i = 0\r\n        if (len > 0) {\r\n            int inputTokens0 = tx.inputs[0].tokenAmount;\r\n            if (inputTokens0 > 0) {\r\n                require(tx.outputs[0].value == inputTokens0 * dividendPerToken);\r\n            }\r\n        }\r\n        \r\n        // i = 1\r\n        if (len > 1) {\r\n            int inputTokens1 = tx.inputs[1].tokenAmount;\r\n            if (inputTokens1 > 0) {\r\n                require(tx.outputs[1].value == inputTokens1 * dividendPerToken);\r\n            }\r\n        }\r\n\r\n        // i = 2\r\n        if (len > 2) {\r\n            int inputTokens2 = tx.inputs[2].tokenAmount;\r\n            if (inputTokens2 > 0) {\r\n                require(tx.outputs[2].value == inputTokens2 * dividendPerToken);\r\n            }\r\n        }\r\n\r\n        // i = 3\r\n        if (len > 3) {\r\n            int inputTokens3 = tx.inputs[3].tokenAmount;\r\n            if (inputTokens3 > 0) {\r\n                require(tx.outputs[3].value == inputTokens3 * dividendPerToken);\r\n            }\r\n        }\r\n\r\n        // i = 4\r\n        if (len > 4) {\r\n            int inputTokens4 = tx.inputs[4].tokenAmount;\r\n            if (inputTokens4 > 0) {\r\n                require(tx.outputs[4].value == inputTokens4 * dividendPerToken);\r\n            }\r\n        }\r\n        \r\n        // Limit to 5 inputs for this demo\r\n        require(len <= 5);\r\n    }\r\n}\r\n",
  "debug": {
    "bytecode": "c37600a06300d07600a06300cc785479959d6875687651a06351d07600a06351cc785479959d6875687652a06352d07600a06352cc785479959d6875687653a06353d07600a06353cc785479959d6875687654a06354d07600a06354cc785479959d68756855a177",
    "sourceMap": "12:18:12:34;16:12:16:15;:18::19;:12:::1;:21:21:9:0;17:41:17:42;:31::55:1;18:16:18:28:0;:31::32;:16:::1;:34:20:13:0;19:35:19:36;:24::43:1;:47::59:0;:62::78;;:47:::1;:16::80;18:34:20:13;16:21:21:9;;24:12:24:15:0;:18::19;:12:::1;:21:29:9:0;25:41:25:42;:31::55:1;26:16:26:28:0;:31::32;:16:::1;:34:28:13:0;27:35:27:36;:24::43:1;:47::59:0;:62::78;;:47:::1;:16::80;26:34:28:13;24:21:29:9;;32:12:32:15:0;:18::19;:12:::1;:21:37:9:0;33:41:33:42;:31::55:1;34:16:34:28:0;:31::32;:16:::1;:34:36:13:0;35:35:35:36;:24::43:1;:47::59:0;:62::78;;:47:::1;:16::80;34:34:36:13;32:21:37:9;;40:12:40:15:0;:18::19;:12:::1;:21:45:9:0;41:41:41:42;:31::55:1;42:16:42:28:0;:31::32;:16:::1;:34:44:13:0;43:35:43:36;:24::43:1;:47::59:0;:62::78;;:47:::1;:16::80;42:34:44:13;40:21:45:9;;48:12:48:15:0;:18::19;:12:::1;:21:53:9:0;49:41:49:42;:31::55:1;50:16:50:28:0;:31::32;:16:::1;:34:52:13:0;51:35:51:36;:24::43:1;:47::59:0;:62::78;;:47:::1;:16::80;50:34:52:13;48:21:53:9;;56:23:56:24:0;:8::26:1;11:4:57:5",
    "logs": [],
    "requires": [
      {
        "ip": 18,
        "line": 19
      },
      {
        "ip": 38,
        "line": 27
      },
      {
        "ip": 58,
        "line": 35
      },
      {
        "ip": 78,
        "line": 43
      },
      {
        "ip": 98,
        "line": 51
      },
      {
        "ip": 104,
        "line": 56
      }
    ]
  },
  "compiler": {
    "name": "cashc",
    "version": "0.12.0"
  },
  "updatedAt": "2025-11-21T16:50:59.230Z"
}